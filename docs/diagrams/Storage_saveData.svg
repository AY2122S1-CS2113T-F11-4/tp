<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="865px" preserveAspectRatio="none" style="width:1088px;height:865px;background:#FFFFFF;" version="1.1" viewBox="0 0 1088 865" width="1088px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="767.397" style="stroke:#A80036;stroke-width:1.0;" width="10" x="131" y="72.8745"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="289" y="104.6289"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="586" y="780.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="755.5" y="304.8125"/><rect fill="#FFFFFF" height="77.5088" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1037.5" y="748.7627"/><rect fill="#FFFFFF" height="522.5049" style="stroke:#000000;stroke-width:2.0;" width="971" x="62" y="151.3833"/><rect fill="#FFFFFF" height="457.9731" style="stroke:none;stroke-width:1.0;" width="971" x="62" y="215.915"/><rect fill="#FFFFFF" height="397.853" style="stroke:#000000;stroke-width:2.0;" width="951" x="72" y="269.0352"/><rect fill="#FFFFFF" height="224.6924" style="stroke:#000000;stroke-width:2.0;" width="931" x="82" y="403.4414"/><rect fill="#FFFFFF" height="51.5317" style="stroke:#000000;stroke-width:2.0;" width="911" x="92" y="537.8477"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="136" x2="136" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="294" x2="294" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="431" x2="431" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="591" x2="591" y1="249.9751" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="760" x2="760" y1="320.8726" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="919" x2="919" y1="455.2788" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1042" x2="1042" y1="712.9482" y2="858.2715"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="87" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="12" y="28.0439">CLIverShelf</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="68" x="102" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="109" y="28.0439">:Storage</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="124" x="232" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="239" y="28.0439">shelfList:ShelfList</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="131" x="366" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="373" y="28.0439">currentShelf: Shelf</text><rect fill="#FFFFFF" height="767.397" style="stroke:#A80036;stroke-width:1.0;" width="10" x="131" y="72.8745"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="289" y="104.6289"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="586" y="780.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="755.5" y="304.8125"/><rect fill="#FFFFFF" height="77.5088" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1037.5" y="748.7627"/><polygon fill="#A80036" points="119,68.8745,129,72.8745,119,76.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="125" y1="72.8745" y2="72.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="55.5" y="68.0181">saveData()</text><polygon fill="#A80036" points="277,100.6289,287,104.6289,277,108.6289" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="283" y1="104.6289" y2="104.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="148" y="99.7725">getAllShelvesName()</text><polygon fill="#A80036" points="152,132.3833,142,136.3833,152,140.3833" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="146" x2="293" y1="136.3833" y2="136.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="158" y="131.5269">nameOfAllShelves</text><path d="M62,151.3833 L123,151.3833 L123,160.3833 L113,170.3833 L62,170.3833 L62,151.3833 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="522.5049" style="stroke:#000000;stroke-width:2.0;" width="971" x="62" y="151.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="77" y="167.2813">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="160" x="138" y="165.9893">[nameOfAllShelves.isBlank()]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="183" y1="194.915" y2="194.915"/><line style="stroke:#A80036;stroke-width:1.0;" x1="183" x2="183" y1="194.915" y2="207.915"/><line style="stroke:#A80036;stroke-width:1.0;" x1="142" x2="183" y1="207.915" y2="207.915"/><polygon fill="#A80036" points="152,203.915,142,207.915,152,211.915" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="148" y="190.0586">generate sample data</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="62" x2="1033" y1="216.915" y2="216.915"/><polygon fill="#A80036" points="495,219.915,505,223.915,495,227.915" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="501" y1="223.915" y2="223.915"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="168" x="507" y="217.915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="514" y="240.959">storedData: JSONObject</text><path d="M72,269.0352 L145,269.0352 L145,278.0352 L135,288.0352 L72,288.0352 L72,269.0352 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="397.853" style="stroke:#000000;stroke-width:2.0;" width="951" x="72" y="269.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="87" y="284.9331">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="244" x="160" y="283.6411">[for each nameOfShelf in nameOfAllShelves]</text><polygon fill="#A80036" points="673,290.8125,683,294.8125,673,298.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="679" y1="294.8125" y2="294.8125"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="151" x="685" y="288.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="692" y="311.8564">shelfInfo: JSONObject</text><polygon fill="#A80036" points="152,352.687,142,356.687,152,360.687" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="146" x2="759.5" y1="356.687" y2="356.687"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="158" y="351.8306">shelfInfo</text><polygon fill="#A80036" points="282,384.4414,292,388.4414,282,392.4414" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="288" y1="388.4414" y2="388.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="148" y="383.585">getShelf(nameOfShelf)</text><path d="M82,403.4414 L155,403.4414 L155,412.4414 L145,422.4414 L82,422.4414 L82,403.4414 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="224.6924" style="stroke:#000000;stroke-width:2.0;" width="931" x="82" y="403.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="97" y="419.3394">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="170" y="418.0474">[for each itemName in currentShelf]</text><polygon fill="#A80036" points="834,425.2188,844,429.2188,834,433.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="840" y1="429.2188" y2="429.2188"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="147" x="846" y="423.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="853" y="446.2627">itemInfo: JSONObject</text><polygon fill="#A80036" points="419.5,487.0933,429.5,491.0933,419.5,495.0933" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="425.5" y1="491.0933" y2="491.0933"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="148" y="486.2368">getItem(itemName)</text><polygon fill="#A80036" points="907.5,518.8477,917.5,522.8477,907.5,526.8477" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="913.5" y1="522.8477" y2="522.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="148" y="517.9912">put name, cost, price and remark</text><path d="M92,537.8477 L157,537.8477 L157,546.8477 L147,556.8477 L92,556.8477 L92,537.8477 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="51.5317" style="stroke:#000000;stroke-width:2.0;" width="911" x="92" y="537.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="107" y="553.7456">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="172" y="552.4536">[item is SoldItem]</text><polygon fill="#A80036" points="907.5,577.3794,917.5,581.3794,907.5,585.3794" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="913.5" y1="581.3794" y2="581.3794"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="148" y="576.5229">put saleTime</text><polygon fill="#A80036" points="748.5,616.1338,758.5,620.1338,748.5,624.1338" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="754.5" y1="620.1338" y2="620.1338"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="148" y="615.2773">get("items").put(itemName, itemInfo)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="910.5" x2="928.5" y1="611.1338" y2="629.1338"/><line style="stroke:#A80036;stroke-width:2.0;" x1="910.5" x2="928.5" y1="629.1338" y2="611.1338"/><polygon fill="#A80036" points="579,654.8882,589,658.8882,579,662.8882" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="585" y1="658.8882" y2="658.8882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="148" y="654.0317">put(nameOfShelf, shelfInfo)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="751.5" x2="769.5" y1="649.8882" y2="667.8882"/><line style="stroke:#A80036;stroke-width:2.0;" x1="751.5" x2="769.5" y1="667.8882" y2="649.8882"/><polygon fill="#A80036" points="991,700.6426,1001,704.6426,991,708.6426" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="997" y1="704.6426" y2="704.6426"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="148" y="699.7861">new FileWriter(STORAGE_PATH)</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="79" x="1003" y="680.8882"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1010" y="703.9321">:FileWriter</text><polygon fill="#A80036" points="1025.5,744.7627,1035.5,748.7627,1025.5,752.7627" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="1031.5" y1="748.7627" y2="748.7627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="148" y="743.9063">write data</text><polygon fill="#A80036" points="607,776.5171,597,780.5171,607,784.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="601" x2="1036.5" y1="780.5171" y2="780.5171"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="613" y="775.6606">toString()</text><polygon fill="#A80036" points="1025.5,790.5171,1035.5,794.5171,1025.5,798.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="591" x2="1031.5" y1="794.5171" y2="794.5171"/><polygon fill="#A80036" points="1030.5,822.2715,1040.5,826.2715,1030.5,830.2715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="141" x2="1036.5" y1="826.2715" y2="826.2715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="148" y="821.415">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1033.5" x2="1051.5" y1="817.2715" y2="835.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1033.5" x2="1051.5" y1="835.2715" y2="817.2715"/><polygon fill="#A80036" points="59.5,836.2715,49.5,840.2715,59.5,844.2715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="53.5" x2="135" y1="840.2715" y2="840.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="582" x2="600" y1="831.2715" y2="849.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="582" x2="600" y1="849.2715" y2="831.2715"/><!--MD5=[9cabf855683100ed201c3b751176b220]
@startuml
!include Style.puml
participant CLIverShelf as app
participant ":Storage" as storage
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "storedData: JSONObject" as storedData
participant "shelfInfo: JSONObject" as shelfInfo
participant "itemInfo: JSONObject" as itemInfo
participant ":FileWriter" as FileWriter

app -> storage:saveData()
activate storage
storage -> shelfList:getAllShelvesName()
activate shelfList
shelfList - -> storage: nameOfAllShelves
deactivate shelfList
alt nameOfAllShelves.isBlank()

    storage -> storage: generate sample data

else

    storage -> storedData **
    loop for each nameOfShelf in nameOfAllShelves

        storage -> shelfInfo **
        activate shelfInfo
        shelfInfo - -> storage: shelfInfo
        deactivate shelfInfo
        storage -> shelfList:getShelf(nameOfShelf)
        loop for each itemName in currentShelf

            storage -> itemInfo **
            storage -> currentShelf: getItem(itemName)
            storage -> itemInfo: put name, cost, price and remark

            opt item is SoldItem
                storage -> itemInfo: put saleTime
                end

            storage -> shelfInfo: get("items").put(itemName, itemInfo)
            destroy itemInfo
            end
        storage -> storedData: put(nameOfShelf, shelfInfo)
        destroy shelfInfo
        end

    end
storage -> FileWriter **: new FileWriter(STORAGE_PATH)
storage -> FileWriter: write data
activate FileWriter
FileWriter -> storedData: toString()
activate storedData
storedData - -> FileWriter
deactivate storedData
storage -> FileWriter !! : close()
storage - -> app
deactivate storage
destroy storedData
@enduml

@startuml
skinparam style strictuml
skinparam backgroundColor white
skinparam box white
skinparam classAttributeIconSize 0
participant CLIverShelf as app
participant ":Storage" as storage
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "storedData: JSONObject" as storedData
participant "shelfInfo: JSONObject" as shelfInfo
participant "itemInfo: JSONObject" as itemInfo
participant ":FileWriter" as FileWriter

app -> storage:saveData()
activate storage
storage -> shelfList:getAllShelvesName()
activate shelfList
shelfList - -> storage: nameOfAllShelves
deactivate shelfList
alt nameOfAllShelves.isBlank()

    storage -> storage: generate sample data

else

    storage -> storedData **
    loop for each nameOfShelf in nameOfAllShelves

        storage -> shelfInfo **
        activate shelfInfo
        shelfInfo - -> storage: shelfInfo
        deactivate shelfInfo
        storage -> shelfList:getShelf(nameOfShelf)
        loop for each itemName in currentShelf

            storage -> itemInfo **
            storage -> currentShelf: getItem(itemName)
            storage -> itemInfo: put name, cost, price and remark

            opt item is SoldItem
                storage -> itemInfo: put saleTime
                end

            storage -> shelfInfo: get("items").put(itemName, itemInfo)
            destroy itemInfo
            end
        storage -> storedData: put(nameOfShelf, shelfInfo)
        destroy shelfInfo
        end

    end
storage -> FileWriter **: new FileWriter(STORAGE_PATH)
storage -> FileWriter: write data
activate FileWriter
FileWriter -> storedData: toString()
activate storedData
storedData - -> FileWriter
deactivate storedData
storage -> FileWriter !! : close()
storage - -> app
deactivate storage
destroy storedData
@enduml

PlantUML version 1.2021.11(Sat Oct 02 21:26:11 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>