<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1072px" preserveAspectRatio="none" style="width:1303px;height:1072px;background:#FFFFFF;" version="1.1" viewBox="0 0 1303 1072" width="1303px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="974.1689" style="stroke:#A80036;stroke-width:1.0;" width="10" x="135" y="72.8745"/><rect fill="#FFFFFF" height="529.7505" style="stroke:#A80036;stroke-width:1.0;" width="10" x="140" y="496.293"/><rect fill="#FFFFFF" height="166.3833" style="stroke:#A80036;stroke-width:1.0;" width="10" x="311" y="175.5264"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="311" y="380.6641"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="591.5" y="667.4536"/><rect fill="#FFFFFF" height="75.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="745.5" y="559.8247"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1018" y="808.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1175" y="901.4146"/><rect fill="#FFFFFF" height="217.915" style="stroke:#000000;stroke-width:2.0;" width="418.5" x="96" y="131.9946"/><rect fill="#FFFFFF" height="490.7505" style="stroke:#000000;stroke-width:2.0;" width="1221.5" x="76" y="516.293"/><rect fill="#FFFFFF" height="285.8354" style="stroke:#000000;stroke-width:2.0;" width="1201.5" x="86" y="714.208"/><rect fill="#FFFFFF" height="188.5493" style="stroke:#000000;stroke-width:2.0;" width="1181.5" x="96" y="772.7397"/><rect fill="#FFFFFF" height="92.8975" style="stroke:none;stroke-width:1.0;" width="1181.5" x="96" y="868.3916"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="50" x2="50" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="140" x2="140" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="315.5" x2="315.5" y1="112.9346" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="464.5" x2="464.5" y1="215.5864" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="596.5" x2="596.5" y1="452.4785" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="750.5" x2="750.5" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="887.5" x2="887.5" y1="599.8848" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1022.5" x2="1022.5" y1="824.5771" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1179.5" x2="1179.5" y1="917.4746" y2="1065.0435"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="91" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="12" y="28.0439">:CLIverShelf</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="68" x="106" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="113" y="28.0439">:Storage</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="124" x="688.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="695.5" y="28.0439">shelfList:ShelfList</text><rect fill="#FFFFFF" height="974.1689" style="stroke:#A80036;stroke-width:1.0;" width="10" x="135" y="72.8745"/><rect fill="#FFFFFF" height="529.7505" style="stroke:#A80036;stroke-width:1.0;" width="10" x="140" y="496.293"/><rect fill="#FFFFFF" height="166.3833" style="stroke:#A80036;stroke-width:1.0;" width="10" x="311" y="175.5264"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="311" y="380.6641"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="591.5" y="667.4536"/><rect fill="#FFFFFF" height="75.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="745.5" y="559.8247"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1018" y="808.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1175" y="901.4146"/><polygon fill="#A80036" points="123,68.8745,133,72.8745,123,76.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50.5" x2="129" y1="72.8745" y2="72.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="57.5" y="68.0181">loadData()</text><polygon fill="#A80036" points="274.5,82.8745,284.5,86.8745,274.5,90.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="280.5" y1="86.8745" y2="86.8745"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="59" x="286.5" y="80.8745"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="293.5" y="103.9185">file:File</text><path d="M96,131.9946 L161,131.9946 L161,140.9946 L151,150.9946 L96,150.9946 L96,131.9946 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="217.915" style="stroke:#000000;stroke-width:2.0;" width="418.5" x="96" y="131.9946"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="111" y="147.8926">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="176" y="146.6006">[file not exist]</text><polygon fill="#A80036" points="299,171.5264,309,175.5264,299,179.5264" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="305" y1="175.5264" y2="175.5264"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="152" y="170.6699">createNewFile()</text><polygon fill="#A80036" points="413.5,185.5264,423.5,189.5264,413.5,193.5264" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="419.5" y1="189.5264" y2="189.5264"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="79" x="425.5" y="183.5264"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="432.5" y="206.5703">:FileWriter</text><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="363" y1="251.4009" y2="251.4009"/><line style="stroke:#A80036;stroke-width:1.0;" x1="363" x2="363" y1="251.4009" y2="264.4009"/><line style="stroke:#A80036;stroke-width:1.0;" x1="322" x2="363" y1="264.4009" y2="264.4009"/><polygon fill="#A80036" points="332,260.4009,322,264.4009,332,268.4009" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="328" y="246.5444">generate sample data</text><polygon fill="#A80036" points="453,292.1553,463,296.1553,453,300.1553" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="459" y1="296.1553" y2="296.1553"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="328" y="291.2988">write(sampleData)</text><polygon fill="#A80036" points="453,323.9097,463,327.9097,453,331.9097" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="459" y1="327.9097" y2="327.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="328" y="323.0532">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="456" x2="474" y1="318.9097" y2="336.9097"/><line style="stroke:#A80036;stroke-width:2.0;" x1="456" x2="474" y1="336.9097" y2="318.9097"/><polygon fill="#A80036" points="156,337.9097,146,341.9097,156,345.9097" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="315" y1="341.9097" y2="341.9097"/><polygon fill="#A80036" points="299,376.6641,309,380.6641,299,384.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="305" y1="380.6641" y2="380.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="152" y="375.8076">readString()</text><polygon fill="#A80036" points="156,408.4185,146,412.4185,156,416.4185" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="315" y1="412.4185" y2="412.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="162" y="407.562">text</text><polygon fill="#A80036" points="502.5,440.1729,512.5,444.1729,502.5,448.1729" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="508.5" y1="444.1729" y2="444.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="152" y="439.3164">new JSONObject(text)</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="164" x="514.5" y="420.4185"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="521.5" y="443.4624">storedData:JSONObject</text><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="192" y1="483.293" y2="483.293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="192" y1="483.293" y2="496.293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="151" x2="192" y1="496.293" y2="496.293"/><polygon fill="#A80036" points="161,492.293,151,496.293,161,500.293" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="157" y="478.4365">loadFromJson(storedData)</text><path d="M76,516.293 L149,516.293 L149,525.293 L139,535.293 L76,535.293 L76,516.293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="490.7505" style="stroke:#000000;stroke-width:2.0;" width="1221.5" x="76" y="516.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="91" y="532.1909">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="226" x="164" y="530.8989">[for all shelfName in storedData.keySet()]</text><polygon fill="#A80036" points="733.5,555.8247,743.5,559.8247,733.5,563.8247" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="739.5" y1="559.8247" y2="559.8247"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="157" y="554.9683">addShelf(shelfName)</text><polygon fill="#A80036" points="810.5,569.8247,820.5,573.8247,810.5,577.8247" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="755.5" x2="816.5" y1="573.8247" y2="573.8247"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="131" x="822.5" y="567.8247"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="829.5" y="590.8687">currentShelf: Shelf</text><polygon fill="#A80036" points="161,631.6992,151,635.6992,161,639.6992" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155" x2="749.5" y1="635.6992" y2="635.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="167" y="630.8428">currentShelf</text><polygon fill="#A80036" points="579.5,663.4536,589.5,667.4536,579.5,671.4536" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="585.5" y1="667.4536" y2="667.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="157" y="662.5972">getJSONObject(shelfName).getJSONObject("items").keySet()</text><polygon fill="#A80036" points="161,695.208,151,699.208,161,703.208" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155" x2="595.5" y1="699.208" y2="699.208"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="167" y="694.3516">itemNames</text><path d="M86,714.208 L159,714.208 L159,723.208 L149,733.208 L86,733.208 L86,714.208 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="285.8354" style="stroke:#000000;stroke-width:2.0;" width="1201.5" x="86" y="714.208"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="101" y="730.106">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="174" y="728.814">[for all itemName in itemNames]</text><polygon fill="#A80036" points="584.5,753.7397,594.5,757.7397,584.5,761.7397" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="590.5" y1="757.7397" y2="757.7397"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="157" y="752.8833">get information about the item with name itemName</text><path d="M96,772.7397 L157,772.7397 L157,781.7397 L147,791.7397 L96,791.7397 L96,772.7397 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="188.5493" style="stroke:#000000;stroke-width:2.0;" width="1181.5" x="96" y="772.7397"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="111" y="788.6377">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="172" y="787.3457">[item is not a soldItem]</text><polygon fill="#A80036" points="951.5,794.5171,961.5,798.5171,951.5,802.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="957.5" y1="798.5171" y2="798.5171"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="119" x="963.5" y="792.5171"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="970.5" y="815.561">currentItem: Item</text><polygon fill="#A80036" points="161,856.3916,151,860.3916,161,864.3916" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155" x2="1022" y1="860.3916" y2="860.3916"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="167" y="855.5352">item</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="96" x2="1277.5" y1="869.3916" y2="869.3916"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="101" y="881.9976">[item is a soldItem]</text><polygon fill="#A80036" points="1080.5,887.4146,1090.5,891.4146,1080.5,895.4146" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="1086.5" y1="891.4146" y2="891.4146"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="175" x="1092.5" y="885.4146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1099.5" y="908.4585">currentSoldItem: SoldItem</text><polygon fill="#A80036" points="161,949.2891,151,953.2891,161,957.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155" x2="1179" y1="953.2891" y2="953.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="167" y="948.4326">item</text><polygon fill="#A80036" points="876,988.0435,886,992.0435,876,996.0435" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="150" x2="882" y1="992.0435" y2="992.0435"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="157" y="987.187">addItem(item)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="192" y1="1025.0435" y2="1025.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192" x2="192" y1="1025.0435" y2="1038.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="192" y1="1038.0435" y2="1038.0435"/><polygon fill="#A80036" points="155,1034.0435,145,1038.0435,155,1042.0435" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="61.5,1043.0435,51.5,1047.0435,61.5,1051.0435" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="139" y1="1047.0435" y2="1047.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="307" x2="325" y1="1038.0435" y2="1056.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="307" x2="325" y1="1056.0435" y2="1038.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="587.5" x2="605.5" y1="1038.0435" y2="1056.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="587.5" x2="605.5" y1="1056.0435" y2="1038.0435"/><!--MD5=[5683f17cd1fe8bb39d9f67a24282151e]
@startuml
!include Style.puml

participant ":CLIverShelf" as app
participant ":Storage" as storage
participant "file:File" as file
participant ":FileWriter" as FileWriter
participant "storedData:JSONObject" as storedData
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "currentItem: Item" as currentItem
participant "currentSoldItem: SoldItem" as currentSoldItem

app->storage:loadData()
activate storage
storage -> file**
opt file not exist
    storage -> file:createNewFile()
    activate file
    file -> FileWriter **
    file -> file:generate sample data
    file -> FileWriter: write(sampleData)
    file -> FileWriter !!:close()
    file - -> storage
    deactivate file
    end
storage -> file: readString()
activate file
file - -> storage: text
deactivate file
storage -> storedData**: new JSONObject(text)
storage -> storage:loadFromJson(storedData)
activate storage
loop for all shelfName in storedData.keySet()
    storage -> shelfList:addShelf(shelfName)
    activate shelfList
    shelfList -> currentShelf**
    shelfList - -> storage: currentShelf
    deactivate shelfList
    storage -> storedData: getJSONObject(shelfName).getJSONObject("items").keySet()
    activate storedData
    storedData - -> storage: itemNames
    deactivate storedData
    loop for all itemName in itemNames
        storage -> storedData: get information about the item with name itemName
        alt item is not a soldItem
            storage -> currentItem**
            activate currentItem
            currentItem - -> storage:item
            deactivate currentItem
        else item is a soldItem
            storage -> currentSoldItem**
            activate currentSoldItem
            currentSoldItem - -> storage:item
            deactivate currentSoldItem
        end
        storage -> currentShelf: addItem(item)
        end
    end
storage - -> storage
deactivate
storage - -> app
deactivate
destroy file
destroy storedData
@enduml

@startuml
skinparam style strictuml
skinparam backgroundColor white
skinparam box white
skinparam classAttributeIconSize 0

participant ":CLIverShelf" as app
participant ":Storage" as storage
participant "file:File" as file
participant ":FileWriter" as FileWriter
participant "storedData:JSONObject" as storedData
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "currentItem: Item" as currentItem
participant "currentSoldItem: SoldItem" as currentSoldItem

app->storage:loadData()
activate storage
storage -> file**
opt file not exist
    storage -> file:createNewFile()
    activate file
    file -> FileWriter **
    file -> file:generate sample data
    file -> FileWriter: write(sampleData)
    file -> FileWriter !!:close()
    file - -> storage
    deactivate file
    end
storage -> file: readString()
activate file
file - -> storage: text
deactivate file
storage -> storedData**: new JSONObject(text)
storage -> storage:loadFromJson(storedData)
activate storage
loop for all shelfName in storedData.keySet()
    storage -> shelfList:addShelf(shelfName)
    activate shelfList
    shelfList -> currentShelf**
    shelfList - -> storage: currentShelf
    deactivate shelfList
    storage -> storedData: getJSONObject(shelfName).getJSONObject("items").keySet()
    activate storedData
    storedData - -> storage: itemNames
    deactivate storedData
    loop for all itemName in itemNames
        storage -> storedData: get information about the item with name itemName
        alt item is not a soldItem
            storage -> currentItem**
            activate currentItem
            currentItem - -> storage:item
            deactivate currentItem
        else item is a soldItem
            storage -> currentSoldItem**
            activate currentSoldItem
            currentSoldItem - -> storage:item
            deactivate currentSoldItem
        end
        storage -> currentShelf: addItem(item)
        end
    end
storage - -> storage
deactivate
storage - -> app
deactivate
destroy file
destroy storedData
@enduml

PlantUML version 1.2021.11(Sat Oct 02 21:26:11 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>